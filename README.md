# 仿京东优选微信小程序
- 记录仿京东优选微信小程序的点点滴滴  
  附上掘金原文👉https://juejin.im/post/5e33e6ede51d451c52194251  
  附上简书原文👉https://www.jianshu.com/p/70a989c61dee

  由于小程序开发经验不足，这是本人第一次进行完整的小程序项目的开发，所以对于小程序的开发还有很多不懂的地方，希望通过这次的小程序高仿实战可以加强自己的动手能力以及看文档的能力，快速上手小程序的开发  

## Start  
./api 下
> npm i 
> npm i json-server  
> npm json-server --port=1314 db.json

- 第一次提交   

  完成了小程序页面的基本构建构建 tabBar等  

  完成了小程序的首页 index 界面的构建 index  

  建立了对应的数据库并对数据库进行了存取操作  

  不足之处是对于页面结构的掌握还不是很好，css方面需要加强，对于布局和界面px和rpx的计算还需要进一步掌握

- 第二次提交  

  完成了小程序分类导航页面 explore 的构建  

  使用json-server，以api的形式导入导航栏数据  

  实现了导航栏切换事件构建  

  导航栏的红色下边框仍然存在问题，下边框设置像素宽度无效  

  数据库内数据分类的方式和标识符可能还存在一定的问题

- 第三次提交  

  优化了 index 和 explore 界面的部分结构和样式，添加了页面刷新事件  

  增加了页面间的数据传递  

  完成了小程序商品详情界面的基本设计构建 评论板块尚未实现  

  不足之处是界面的样式比较杂乱，只考虑了当前样式实现

- 第四次提交  

  最近事情比较多，所以这次提交的不多  

  完成了商品详情界面 goodsDetail 底部的部分评论展示

- 第五次提交  

  完善修改了商品详情页面 goodsDetail 底部评论的页面结构  

  修改了商品详情页面 goodsDetail 底部评论数据的填放逻辑  

  添加了所有评论 commentDetail 展示界面，实现了数据展示逻辑

- 第六次提交  

  完善修复了商品详情界面 goodsDetail 的页面布局  

  解决了商品详情界面 goodsDetail 在没有评论的情况下内容显示不完整的bug  

  实现了个人信息 user 页面的基本构建，暂未绑定点击事件和验证用户是否登录

- 第七次提交  

  完成了关于 about 和反馈 feedback 界面的基本构建，添加了 json-server 中反馈界面 feedback 的模拟数据  

  添加了跳转关于 about 和反馈 feedback 界面的点击事件

- 第八次提交  

  为首页 index、商品详情页 goodsDetail 和发现页 explore 添加了分享事件，小程序可以在微信好友间进行分享  

  重构了用户页 user 的页面，简化了页面布局结构，将操作选项数据放进 json-server 中，修复了 explore 页导航栏下边框显示异常的bug

  添加了用户登录和注销操作事件，通过获取用户手机号进行登录(由于appID是个人ID，暂时无法实现获取，目前选择使用默认值代替)  

  添加我的预约 apppintment、我的优惠券 discount、待付款/待收货等个人选项 account 页面

- 第九次提交  

  因为过年的原因，所以这次提交的比较少

  本次提交修改了用户界面 user 以及用户相关界面的一些细节和逻辑

  给优惠券增加了样式，我的优惠券界面 discount 里的导航栏尚未完成动态显示优惠券数量

- 第十次提交
  
  修复了一下在优惠券界面 discount 中发现的数据填放逻辑 bug

  添加了订单查看界面 account，参照 discount 界面重整了数据填放逻辑  

  写完了订单查看界面 account 的样式  

  添加了订单售后页面 service，样式写了一部分，还未添加数据
  
  方便业务实现和加快小程序运行，把数据库数据导出了，把整个小程序从云开发整合成普通开发，所以这次提交的全部是新内容 

  今日份疑惑，由于 wx.request 请求比较多所以想拎出来作为一个 promise 模块，但是 import 导入的时候报错显示 exports 出来的不是函数，弄了好久都没有解决，希望下次可以解决这个问题

- 第十一次提交
  
  解决了上次提交的模块问题，把所有的 wx.request 请求封装成了单独的模块，原来是 module.exports 的时候要暴露出一个 JSON 格式的对象作为 API，看来我是太粗心了，下次一定要注意

  修复了用户界面 user 跳转查看订单页面 accout 时不会自动渲染对应导航栏的 bug  

  为售后服务页面 service 添加了样式和数据判断填放，添加了页面的筛选弹出动画功能(难点)  

  给售后服务页面 service 和查看订单页面 accout 添加了一下滑动一段距离显示返回顶部图标，并实现了其功能

  添加了订单详情页面 orderDetail，并完成了样式编写和数据填放逻辑  

- 第十二次提交  

  这一次把所有的界面都重新理了一遍，发现前期有很多东西考虑不周，比如在全局的配置上把少数页面的配置写成了全局配置，导致之后很多页面都要在 json 文件中修改配置，所以这次把全局的配置再次调整了一下

  添加了客服页面 seller,维修选项页面 afterMarket，维修页面 fix，由于 IOS 端的京东优选小程序中无法打开非业务域名看不到页面的具体结构，所以 afterMarket 和 fix 只是做了一个提示页面  

  添加了京东商品详情界面 jd，本来一开始偷懒没做的自定义导航栏这一次也自己动手撸出来了一个导航栏，不过借此机会也发现了京东优选小程序的一个小 bug --- 在点击前往京东跳转后页面导航栏的返回上一层按钮和回到主页按钮都是跳转的主页，我在写业务的时候把这个修改过来了  

  大致写了一下京东商品详情界面 jd 的样式和数据逻辑，考虑到小程序并不是京东商城主体，所以偷懒省略了店铺卡片和评论卡片  

- 第十二次提交  

  添加了京东商品详情界面 jd 中的联系客服跳转  

  自己动手封装了了一个自定义 toast，用在了反馈界面 feedback 和京东商品详情界面 jd  

  增加了京东商品详情界面 jd 的响应事件，添加了底部弹出菜单选项框，能够选择商品的种类属性和数量  

  实现了添加购物车，购物车计数、计算优惠和总额，以及购物车中的商品数量加减等一系列事件  



## 小结
### 仿京东优选小程序项目的基本功能都实现了，过程中也学到了很多的东西，也看了很多文档，看了很多大牛写的一些文章、代码和解决方案，但是发现自己做的小程序还是有很多细节上的问题，比如代码的重复问题和 wxss 覆盖率低的一些问题，后续我会继续跟进这个项目，继续做项目的优化和模块化